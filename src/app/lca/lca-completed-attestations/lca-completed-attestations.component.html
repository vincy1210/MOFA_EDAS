

    


                <div class="grid grid-cols-1" color="primary"  class="page-header">
             
                  <label style="font-size: 14px; color: white; font-weight: bold;">Attestation(s) - Completed</label>
                </div>
                
                <div style="padding: 2px;" >
                  <div class="grid grid-cols-1">
              
                      <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 tablepadding">
                        <div  
                          [ngClass]="{'col-span-2': shouldShow, 'col-span-3': !shouldShow }">
              
    
              
        

        <p-table [(selection)]="selectedAttestations"  [resizableColumns]="true" dataKey="edasattestno"  [scrollable]="true"   selectionMode="single"
        #tableref [rowHover]="true" [paginator]="true" currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" [filterDelay]="0"
        [totalRecords]="totalrecords"
        [value]="list"
        [rows]="10" [columns]="selectedColumns" 
        [showCurrentPageReport]="true"
        [rowsPerPageOptions]="[10,20,50]"
        [loading]="loading"
        styleClass="p-datatable-customers p-datatable-gridlines"
        currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
        [globalFilterFields]="[
          'edasattestno',
          'invoicenumber',
          'declarationumber',
          'declarationdate', 'attestreqdate'
        ]" [lazy]="true" (onLazyLoad)="InitTable($event)" [loading]="loading"
        
        >

      
        <ng-template pTemplate="caption">
         
          <p-toolbar  >
            <ng-template pTemplate="left">
           
                <div style="padding: 5px;" class="col-md-3 col-lg-3 col-sm-6">
                        <mat-form-field class="searchboxinput"  >
                          <mat-label><mat-icon style="font-size:larger;">search</mat-icon> Search</mat-label>
                          <input  matInput type="text" (input)="tableref.filterGlobal($any($event.target).value, 'contains')" placeholder="Search">
                        </mat-form-field>
                </div>
       
           
            </ng-template>
            <ng-template pTemplate="right">
              <div *ngIf="enableFilters" style="padding: 5px;" class="col-md-3 col-lg-3  col-md-6">
                <mat-form-field  class="filter_datepicker">
                  <mat-label>{{'Start Date' | translate}}</mat-label>
                  <input matInput [matDatepicker]="decDatepicker1" [max]="todayModel" [(ngModel)]="oneMonthAgo" placeholder="From" name="createdatefrom"  />
                  <mat-datepicker-toggle matSuffix [for]="decDatepicker1"></mat-datepicker-toggle>
                  <mat-datepicker #decDatepicker1></mat-datepicker>
                </mat-form-field>
        </div>
        <div *ngIf="enableFilters" style="padding: 5px;" class="col-md-3 col-lg-3  col-sm-6">
          <mat-form-field class="filter_datepicker">
            <mat-label>{{'End Date' | translate}}</mat-label>
            <input matInput [matDatepicker]="decDatepicker2" [min]="oneMonthAgo" [max]="today" placeholder="To" [(ngModel)]="todayModel" name="createdateto"  />
            <mat-datepicker-toggle matSuffix [for]="decDatepicker2"></mat-datepicker-toggle>
            <mat-datepicker #decDatepicker2></mat-datepicker>
          </mat-form-field>
        </div>
        <div *ngIf="enableFilters" style="padding: 5px;" class="col-md-3 col-lg-3">
          <button type="button" mat-flat-button color="primary" (click)="FilterInitTable()" >Apply</button>
        </div>
        <p-multiSelect [options]="cols" [(ngModel)]="selectedColumns" optionLabel="header"
        selectedItemsLabel="{0} columns selected" [style]="{'min-width': '200px'}" placeholder="Choose Columns"></p-multiSelect>

        <span style="padding: 10px;"></span>
              <button type="button" pButton  pRipple  icon="pi pi-file-excel"  (click)="exportExcel()"  class="mr-2 grid-header-right-icon"  pTooltip="Excel"
              tooltipPosition="bottom"
            ></button>
             <button  type="button"
              pButton  pRipple  icon="pi pi-filter"   (click)="clickChips()"  class="mr-2 grid-header-right-icon"
              [ngClass]="{ clicked: enableFilters }"  [pTooltip]="'Filter' | translate"  tooltipPosition="bottom"
            ></button>
            </ng-template>
        </p-toolbar>
  
        </ng-template>
        <ng-template pTemplate="header" let-columns>
        

          <tr>
            <th pSortableColumn="edasattestno" > Attestation No  <p-sortIcon field="edasattestno"></p-sortIcon></th>
            <th pSortableColumn="statusname"  >Status <p-sortIcon field="statusname"></p-sortIcon></th>
                 <th pSortableColumn="currencycode">Currency <p-sortIcon field="currencycode"></p-sortIcon> </th>
                 <th pSortableColumn="invoiceamount">Invoice Amount <p-sortIcon field="invoiceamount"></p-sortIcon></th>
                 <th pSortableColumn="feesamount">Fees Amount <p-sortIcon field="feesamount"></p-sortIcon></th>
                 <th pSortableColumn="invoicenumber">Invoice No <p-sortIcon field="invoicenumber"></p-sortIcon></th>
                 <th pSortableColumn="declarationumber">Declaration No <p-sortIcon field="declarationumber"></p-sortIcon></th>
                 <th pSortableColumn="declarationdate">Declaration Date <p-sortIcon field="declarationdate"></p-sortIcon></th>
                <th pSortableColumn="attestreqdate">Created <p-sortIcon field="attestreqdate"></p-sortIcon>  </th>
              <th *ngFor="let col of columns" pResizableColumn [pSortableColumn]="col.field"  >
                  {{col.header}} <p-sortIcon [field]="col.field" ></p-sortIcon>
                  <p-columnFilter   type="text"  *ngIf="enableFilters" [field]="col.field" display="menu"></p-columnFilter>
              </th>
              <th pFrozenColumn alignFrozen="right">{{'Action' | translate}}</th>
          </tr>

        </ng-template>
        <ng-template pTemplate="body" let-customer let-columns="columns" >
          <tr [pSelectableRow]="customer">
              <td>
                <span >{{customer.edasattestno}} </span>
                  
              </td>
              <td>
                <p-tag [value]="customer.statusname" severity="success"></p-tag>
                <!-- <span class="image-text">{{customer.statusname}}</span> -->
              </td>
              <td><span class="image-text">{{customer.currencycode}}</span></td>

              <td style="text-align: right;"><span class="image-text">{{common.formatAmount(customer.invoiceamount)}}</span></td>
            <td style="text-align: right;"><span class="image-text">{{common.formatAmount(customer.feesamount)}}</span></td>

              <td>
                  <span class="image-text">{{customer.invoicenumber}}</span>
              </td>
              <td>
                <span class="image-text">{{ (customer.declarationumber) }}</span>
            </td>
            
              <td>
                  <span class="image-text">{{splitdatetime(customer.declarationdate)?.date}}</span>
              </td>
              <td>
                  <span class="image-text">{{splitdatetime(customer.attestreqdate)?.date}}</span>
              </td>
              <!-- <td><span class="image-text">{{customer.lcaname}}</span></td>
              <td><span class="image-text">{{customer.companyname}}</span></td> -->
              <td *ngFor="let col of columns">
                {{customer[col.field]}}
            </td>

             
              <td pFrozenColumn alignFrozen="right">
                <span (click)="openNew(customer)" style="padding:15px; cursor: pointer;" pTooltip="Details" tooltipPosition="bottom"  class="image-text viewaction">
                  <mat-icon class="action_eye_icon" >visibility</mat-icon>

                    </span>
                    <span (click)="this.common.getimagebase64(customer.attestfilelocation)" style="padding:15px; cursor: pointer;" tooltipPosition="bottom" pTooltip="Download"  class="image-text viewaction">
                  <mat-icon class="action_eye_icon" >download</mat-icon> </span>


              </td>
          </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage">
          <tr>
            <td colspan="12">No data found.</td>
          </tr>
        </ng-template>
      </p-table>
              </div>
              <div class="bg-white rounded-lg mofa-tab-section show"
                [ngClass]="{'show': shouldShow, 'hide': !shouldShow }">
                <!-- <app-attestation-workflow [src]="src" [selectedAttestations]="selectedAttestations"></app-attestation-workflow> -->
              </div>
            </div>
          </div>
        </div>
        
    
    <!-- </div> -->


    <p-dialog [(visible)]="AddInvoiceDialog" [draggable]="false" style="top:20%" [style]="{ width: '750px' }" header="Attestation Details" [modal]="true" styleClass="p-fluid">
      <p-tabView>
        <p-tabPanel header="Details">
      <div class="viewmore">
        <div class="more-content-section">
          <div class="grid grid-cols-2">
            <ng-container >
             
              <div class="more-content" *ngFor="let field of fields">
                <mat-label class="title-label">{{ field.label | translate }}</mat-label>
                <div class="more-content-body">
                  <mat-label class="more-content-block">{{ field.value }}</mat-label>
                </div>
              </div>
              <div class="more-content">
                <mat-label class="title-label">{{ 'Attestation File' | translate }}</mat-label>
                <div class="more-content-body">
                  <mat-label class="more-content-block" >{{ 'Attestation.pdf' }} <span (click)="common.getimagebase64(currentrow.attestfilelocation)">  <mat-icon class="action_eye_icon_popup" >download</mat-icon> </span> </mat-label>
                </div>
              </div>
              
            </ng-container>
          </div>
        </div>
      </div>
    </p-tabPanel>
    <p-tabPanel header="Receipt">
      <!-- {{this.src}} -->
      <div class="grid grid-cols-1">
        <div id="outerContainer">
          <div class="pdf-container">
            <pdf-viewer
              [src]="src"
              [rotation]="0"
              [original-size]="false"
              [show-all]="true"
              [fit-to-page]="false"
              [zoom]="1"
              [zoom-scale]="'page-width'"
              [stick-to-page]="false"
              [render-text]="true"
              [external-link-target]="'blank'"
              [autoresize]="true"
              [show-borders]="false"
              style="width: 100%; height: 600px"
            ></pdf-viewer>
          </div>
        </div>
      </div>
    </p-tabPanel>
  </p-tabView>
      <ng-template pTemplate="footer">
        <p-button icon="pi pi-times" (click)="AddInvoiceDialog = false" label="{{'Cancel' | translate}}" styleClass="p-confirm-dialog-reject"></p-button>
    </ng-template>
  
  </p-dialog>